<?xml version="1.0" encoding="UTF-8"?>

<!--
	Spring Web MVC dispatcher servlet configuration.
	The DispatcherServlet is the front-controller servlet for Spring MVC framework.
	It serves to funnel HTTP requests to their correct controller (handler).
	These are the beans used in configuring the DispatcherServlet servlet as defined in web.xml.
-->

<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xmlns:context="http://www.springframework.org/schema/context"
	   xmlns:p="http://www.springframework.org/schema/p"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
	   					   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd">
	   					   
	<bean id="mappingJacksonHttpMessageConverter" class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter" />
	
	<bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter">
	    <property name="messageConverters">
	      <list>
	      	<!-- These converters are for the HTTP request body XML that needs to be unmarshaled to to object for
	      		 the controller methods annotated with @RequestBody -->
	        <ref bean="miscConfigMessageConverter" />
	        <ref bean="outageMessageConverter" />
	        <ref bean="mappingJacksonHttpMessageConverter" />
	        <ref bean="stringHttpMessageConverter" />
	      </list>
	    </property>
	</bean>

	<bean class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
		<property name="definitions">
			<list>
				<value>/WEB-INF/tiles/tiles-defs.xml</value>
			</list>
		</property>
	</bean>
	

	<!-- Map logical view name in the form (_viewName) to a tiles definition name in the tiles definition file(s),
		 see tilesConfigurer above.
		 Tiles logical view names begin with an underscore (_) to indicate that they are a tiles definition. -->
	<bean id="tilesViewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver"
	  	  p:order="1"
	  	  p:viewClass="org.springframework.web.servlet.view.tiles2.TilesView"
	  	  p:viewNames="_*"/>
	  	  
	<!-- Used to marshal the object for REST HTTP response body. -->
	<bean id="restViewResolver" class="org.springframework.web.servlet.view.BeanNameViewResolver"	
		  p:order="2"/>

	<!-- Map logical view name to a physical JSP file located at /WEB-INF/jsp/<viewName>.jsp --> 
	<bean id="internalResourceViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"
		  p:order="3"
	  	  p:prefix="/WEB-INF/jsp/"
	  	  p:suffix=".jsp"/>

</beans>