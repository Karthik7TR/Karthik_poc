<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:task="http://www.springframework.org/schema/task"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
						   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
        				   http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd">

	<task:executor id="taskExecutor"/>

	<task:scheduler id="taskScheduler"/>
	
	<!-- Detects @Scheduled annotations -->
	<task:annotation-driven executor="taskExecutor" scheduler="taskScheduler"/>
	
	<!-- Job start scheduler -->
	<bean class="com.thomsonreuters.uscl.ereader.mgr.cleanup.BookDefinitionLockCleaner"
		  p:bookDefinitionLockService-ref="bookDefintionLockService"/>  	 

	<!-- Scheduled task to remove old Spring Batch job database table data and filesystem work files -->
	<bean class="com.thomsonreuters.uscl.ereader.mgr.cleanup.JobCleaner"
		  p:managerService-ref="managerService"
		  p:cleanJobsGreaterThanThisManyDaysOld="${cleanup.jobs.older.than.this.many.days.old}"  	 
		  p:cleanPlannedOutagesGreaterThanThisManyDaysOld="180"
		  p:numberLastMajorVersionKept="2"
		  p:daysBeforeDocMetadataDelete="30"/>
</beans>