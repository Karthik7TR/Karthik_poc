---
Pipeline:
  Name: a206296-cumulus-pipeline
  ApplicationAssetInsightId: '206296'
  ResourceOwner: firstname.lastname@tr.com  # FIXME  Your email
  EnvironmentType: DEVELOPMENT
  ServiceName: ems
  GroupName: "TEN-Acct-Id"  # FIXME the same GroupName as in the installer-input.yaml
  Notifications:
    # Mandatory: The SNS Arn to publish to for certain events in the pipeline.
    SnsArn: arn:aws:sns:eu-west-1:462066144630:a206296-TEN-Acct-Id-bluegreen-resource-cleanup-topic
    # Optional. The events to notify on. Defaults to PipelineSuccess and PipelineFailure.
    NotifyOn:
      - PipelineSuccess
      - PipelineFailure
      - DeploySuccess
      - DeployFailure
Source:
  Type: S3
  Key: TEN-Acct-Id/pipeline-source.zip  # FIXME Where you want to upload your source file zip to.  This is where the pipeline watches to trigger.
  Bucket: a206296-tr-tax-prof-cicd-sandbox-eu-west-1-dojo
Components:
  Build:
    Template:
      TemplatePath: build_component.yaml
      TemplateName: CustomBuild

    # custom_build.yaml parameters
    CustomBuildActionTimeout: 10
    Publish:
      Template:
        TemplatePath: s3_publish.yaml
        TemplateName: S3Publish
      OutputBucket: a206296-tr-tax-prof-cicd-sandbox-eu-west-1-dojo
      OutputObjectKey: TEN-Acct-Id/binary-artifacts  # FIXME Where you want your binary artifacts to be published.
  Bake:
    Template:
      TemplatePath: bake_component.yaml
      TemplateName: CustomBake
    # custom_bake.yaml parameters
    CustomBakeActionTimeout: 10
  Deploy:
    # # Uncomment this block if you want to use the servicenow integration
    # # https://github.com/tr/cumulus_cicd-servicenow-chg-automation-example
    # - Name: dev-ScriptOnly
    #   Type: ScriptOnly
    #   Version: 1
    #   Provider: a206296-TEN-Acct-Ideuwe1 # Name of custom action to use.
    #   Approval:
    #     Enabled: true
    #     CustomData: "Hodor is my best friend."
    #     ExternalEntityLink: http://endless.horse/
    #     # NotificationArn: arn:aws:sns:eu-west-1:307097860667:a206296-TEN-Acct-Id-bluegreen-resource-cleanup-topic

    - Environment: dev
      Provider: a206296-TEN-Acct-Ideuwe1  # FIXME  # CodePipeline Custom Action action type name.
      Version: 1

    # # Uncomment this block if you want to use the servicenow integration
    # # https://github.com/tr/cumulus_cicd-servicenow-chg-automation-example
    # - Name: qa-ScriptOnly
    #   Type: ScriptOnly
    #   Version: 1
    #   Provider: a206296-TEN-Acct-Ideuwe1 # Name of custom action to use.
    #   Approval:
    #     Enabled: yes
    #     CustomData: "Hodor is your best friend."
    #     ExternalEntityLink: https://www.xanthir.com/etc/fractals/tree.html
    #     # NotificationArn: arn:aws:sns:eu-west-1:307097860667:a206296-TEN-Acct-Id-bluegreen-resource-cleanup-topic

    - Environment: qa
      Provider: a206296-TEN-Acct-Ideuwe1  # FIXME  # CodePipeline Custom Action action type name.
      Version: 1
