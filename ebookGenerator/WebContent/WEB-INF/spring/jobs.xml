<beans:beans xmlns="http://www.springframework.org/schema/batch" 
     xmlns:beans="http://www.springframework.org/schema/beans"
     xmlns:p="http://www.springframework.org/schema/p"
     xmlns:context="http://www.springframework.org/schema/context"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="
           http://www.springframework.org/schema/beans 	 http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
           http://www.springframework.org/schema/batch   http://www.springframework.org/schema/batch/spring-batch-2.1.xsd">
 
	<job id="ebookGeneratorJob">
		<step id="initializeJob">
			<tasklet ref="initializeTask"/>
			<next on="COMPLETED" to="define"/>
			<fail on="FAILED"/>
		</step>
		<step id="define">
			<tasklet ref="stubTask"/>
			<next on="COMPLETED" to="gather"/>
		</step>
		<step id="gather">
			<tasklet ref="stubTask"/>
			<next on="COMPLETED" to="gatherDynamicImages"/>
		</step>
		<step id="gatherDynamicImages">
			<tasklet ref="stubTask"/>
			<next on="COMPLETED" to="gatherStaticImages"/>
			<fail on="FAILED"/>
		</step>
		<step id="gatherStaticImages">
			<tasklet ref="stubTask"/>
			<next on="COMPLETED" to="combineImageFiles"/>
			<fail on="FAILED"/>
		</step>
		<step id="combineImageFiles">
			<tasklet ref="stubTask"/>
			<next on="COMPLETED" to="format"/>
			<fail on="FAILED"/>
		</step>
		<step id="format">
			<tasklet ref="stubTask"/>
			<next on="COMPLETED" to="assembleEBook"/>
		</step>
		
		<!-- Assemble the title -->
		<step id="assembleEBook">
			<tasklet ref="assembleEBookTask"/>
			<next on="COMPLETED" to="deliverEBook"/>
			<fail on="FAILED"/>
		</step>
		
		<!-- Deliver the title to ProView -->
		<step id="deliverEBook">
			<tasklet ref="deliverEBookTask"/>
		</step>
	</job>
	
	<!-- Define each task here -->
	<beans:bean id="stubTask" class="com.thomsonreuters.uscl.ereader.stub.StubTasklet"/>
	<beans:bean id="initializeTask" class="com.thomsonreuters.uscl.ereader.InitializeTask"
				p:rootWorkDirectory="/nas/ebookbuilder/data"/>
	<beans:bean id="gatherDynamicImagesTask" class="com.thomsonreuters.uscl.ereader.gather.step.GatherImageVerticalImagesTask"
				p:imageService-ref="imageService"/>
	<beans:bean id="assembleEBookTask" class="com.thomsonreuters.uscl.ereader.assemble.step.AssembleEbook"
				p:eBookAssemblyService-ref="eBookAssemblyService"/>
	<beans:bean id="deliverEBookTask" class="com.thomsonreuters.uscl.ereader.stub.StubTasklet"/>
</beans:beans>