<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:oxm="http://www.springframework.org/schema/oxm"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
           http://www.springframework.org/schema/beans 	 http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/oxm	 http://www.springframework.org/schema/oxm/spring-oxm-3.0.xsd
           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
           http://www.springframework.org/schema/tx 	 http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">
           

	<bean id="restTemplate" class="org.springframework.web.client.RestTemplate">
      <property name="messageConverters">
        <list>
          <ref bean="docRequestMessageConverter"/>
          <ref bean="tocRequestMessageConverter"/>
          <ref bean="nortRequestMessageConverter"/>
          <ref bean="responseMessageConverter"/>
        </list>
      </property>
	</bean>

	 <oxm:jaxb2-marshaller id="jaxbDocRequestMarshaller">
		<oxm:class-to-be-bound name="com.thomsonreuters.uscl.ereader.gather.domain.GatherDocRequest"/>
	</oxm:jaxb2-marshaller>
	
	<oxm:jaxb2-marshaller id="jaxbTocRequestMarshaller">
		<oxm:class-to-be-bound name="com.thomsonreuters.uscl.ereader.gather.domain.GatherTocRequest"/>
	</oxm:jaxb2-marshaller>
	
	<oxm:jaxb2-marshaller id="jaxbNortRequestMarshaller">
		<oxm:class-to-be-bound name="com.thomsonreuters.uscl.ereader.gather.domain.GatherNortRequest"/>
	</oxm:jaxb2-marshaller>
	
	<oxm:jaxb2-marshaller id="jaxbResponseMarshaller">
		<oxm:class-to-be-bound name="com.thomsonreuters.uscl.ereader.gather.domain.GatherResponse"/>
	</oxm:jaxb2-marshaller>

	<bean id="docRequestMessageConverter" class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
        <property name="marshaller" ref="jaxbDocRequestMarshaller" />
        <property name="unmarshaller" ref="jaxbDocRequestMarshaller" />
        <property name="supportedMediaTypes">
            <list>
                <value>text/xml</value>
                <value>application/xml</value>
            </list>
        </property>
    </bean>	
	<bean id="tocRequestMessageConverter" class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
        <property name="marshaller" ref="jaxbTocRequestMarshaller" />
        <property name="unmarshaller" ref="jaxbTocRequestMarshaller" />
        <property name="supportedMediaTypes">
            <list>
                <value>text/xml</value>
                <value>application/xml</value>
            </list>
        </property>
    </bean>
    <bean id="nortRequestMessageConverter" class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
        <property name="marshaller" ref="jaxbNortRequestMarshaller" />
        <property name="unmarshaller" ref="jaxbNortRequestMarshaller" />
        <property name="supportedMediaTypes">
            <list>
                <value>text/xml</value>
                <value>application/xml</value>
            </list>
        </property>
    </bean>
    <bean id="responseMessageConverter" class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
        <property name="marshaller" ref="jaxbResponseMarshaller" />
        <property name="unmarshaller" ref="jaxbResponseMarshaller" />
    </bean>
    
	
	<bean id="gatherService" class="com.thomsonreuters.uscl.ereader.gather.restclient.service.GatherServiceImpl"
		  p:restTemplate-ref="restTemplate"
		  p:gatherAppContextUrl="http://localhost:8080/eBookGatherer"/>
	
	
</beans>