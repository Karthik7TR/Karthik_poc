<!--
 * Copyright 2011: Thomson Reuters Global Resources. All Rights Reserved.
 * Proprietary and Confidential information of TRGR. Disclosure, Use or
 * Reproduction without the written authorization of TRGR is prohibited
-->
<binding>
    <!-- Gather service REST response body for Toc and Doc requests -->
    <mapping name="gatherResponse" class="com.thomsonreuters.uscl.ereader.gather.domain.GatherResponse">
        <value name="errorCode" field="errorCode" usage="required"/>
        <value name="errorMessage" field="errorMessage" usage="optional"/>
    </mapping>
    
    <!-- Gather Doc service REST request body -->
    <mapping name="gatherDocRequest" class="com.thomsonreuters.uscl.ereader.gather.domain.GatherDocRequest">
	    <structure name="docGuids" usage="required">
	    	<collection field="guids" usage="required">
				<value name="guid" type="java.lang.String" usage="required"/>
			</collection>
		</structure>
        <value name="collectionName" field="collectionName" usage="optional"/>
        <value name="contentDestinationDirectory" field="contentDestinationDirectory" usage="required"/>
        <value name="metadataDestinationDirectory" field="metadataDestinationDirectory" usage="required"/>
    </mapping>

	<!-- Gather table of contents (toc) service REST request body -->
    <mapping name="gatherTocRequest" class="com.thomsonreuters.uscl.ereader.gather.domain.GatherTocRequest">
        <value name="guid" field="guid" usage="required"/>
        <value name="collectionName" field="collectionName" usage="required"/>
        <value name="tocFile" field="tocFile" usage="required"/>
    </mapping>
    
    <!-- Gather table of contents (nort) service REST request body -->
    <mapping name="gatherNortRequest" class="com.thomsonreuters.uscl.ereader.gather.domain.GatherNortRequest">
        <value name="domainName" field="domainName" usage="required"/>
        <value name="expressionFilter" field="expressionFilter" usage="required"/>
        <value name="nortFile" field="nortFile" usage="required"/>
    </mapping>
    
    <mapping name="jobRunRequest" class="com.thomsonreuters.uscl.ereader.orchestrate.core.JobRunRequest">
        <value name="jobName" field="jobName" usage="required"/>
        <structure field="bookKey" usage="required"/>
        <value name="userName" field="userName" usage="optional"/>
        <value name="userEmail" field="userEmail" usage="optional"/>
    </mapping>
    
    <mapping name="bookDefinitionKey" class="com.thomsonreuters.uscl.ereader.orchestrate.core.BookDefinitionKey">
        <value name="fullyQualifiedTitleId" field="fullyQualifiedTitleId" usage="required"/>
    </mapping>
    
    <!-- title.xml -->
    <mapping name="title" class="com.thomsonreuters.uscl.ereader.proview.TitleMetadata" value-style="attribute">
    	<value name="apiversion" field="apiVersion" usage="required"/>
    	<value name="id" field="titleId" usage="required"/>
    	<value name="titleversion" field="titleVersion" usage="required"/>
    	<value name="lastupdated" field="lastUpdated" usage="required"/>
    	<value name="language" field="language" usage="required"/>
    	<value name="status" field="status" usage="required"/>
    	<structure name="features" usage="required">
	    	<collection field="proviewFeatures" usage="optional">
		    	<structure name="feature" type="com.thomsonreuters.uscl.ereader.proview.Feature" usage="optional" value-style="attribute">
		    		<value name="name" field="name" usage="required"/>
		    		<value name="value" field="value" usage="optional"/>
		    	</structure>
	    	</collection>
    	</structure>
    	<structure name="material" usage="required">
	    	<value style="text" field="materialId" usage="optional"/>
    	</structure>
    	<structure field="artwork" usage="required"/>
    	<structure name="assets" usage="required">
    		<collection field="assets" usage="optional">
    			<structure name="asset" type="com.thomsonreuters.uscl.ereader.proview.Asset" usage="optional" value-style="attribute">
		    		<value name="id" field="id" usage="required"/>
		    		<value name="src" field="src" usage="required"/>
    			</structure>
    		</collection>
    	</structure>
    	<structure name="name" usage="required">
    		<value style="text" field="displayName" usage="optional"/>
    	</structure>
    	<structure name="authors" usage="required">
    		<collection field="authors" usage="optional">
    			<structure name="author" type="com.thomsonreuters.uscl.ereader.proview.Author" usage="required">
		    		<value style="text" field="name" usage="optional"/>
    			</structure>
    		</collection>
    	</structure>
    	<collection name="keywords" field="keywords" usage="optional" >
	    	<structure name="keyword" type="com.thomsonreuters.uscl.ereader.proview.Keyword" usage="optional" value-style="attribute">
	    		<value name="type" field="type" usage="required"/>
	    		<value style="text" field="text" usage="required"/>
	    	</structure>
    	</collection>
    	<structure name="copyright" usage="required">
	    	<value style="text" field="copyright" usage="optional"/>
    	</structure>
    	<structure field="tableOfContents" map-as="manifest_toc" />
    	<structure name="docs" usage="required">
    		<collection field="documents" usage="optional">
    			<structure name="doc" type="com.thomsonreuters.uscl.ereader.proview.Doc" usage="optional" value-style="attribute">
    				<value name="id" field="id" usage="required"/>
    				<value name="src" field="src" usage="required"/>
    			</structure>
    		</collection>
    	</structure>
    </mapping>
    
    <mapping name="artwork" class="com.thomsonreuters.uscl.ereader.proview.Artwork" value-style="attribute">
    	<value name="src" field="src"/>
    	<value name="type" field="type"/>
    </mapping>
    
    <mapping class="com.thomsonreuters.uscl.ereader.proview.TableOfContents" abstract="true" type-name="manifest_toc">
    	<structure name="toc">
    		<collection field="tocEntries" usage="optional">
    			<structure name="entry" map-as="manifest_toc_entry"/>
    		</collection>
    	</structure>
    </mapping>
    
    <mapping class="com.thomsonreuters.uscl.ereader.proview.TocEntry" value-style="attribute" abstract="true" type-name="manifest_toc_entry">
		<value name="s" field="anchorReference" usage="optional"/>
		<structure name="text">
			<value style="text" field="text"/>
		</structure>
		<collection field="children" usage="optional">
    		<structure name="entry" map-as="manifest_toc_entry"/>
		</collection>
	</mapping>
	
	<mapping name="EBook" class="com.thomsonreuters.uscl.ereader.gather.TableOfContents">
		<collection field="tocEntries" usage="required"/>
	</mapping>
    
    <mapping name="EBookToc" class="com.thomsonreuters.uscl.ereader.gather.GatherTocEntry">
		<structure name="Name">
			<value style="text" field="text"/>
		</structure>
		<value name="Guid" field="anchorReference" usage="required"/>
		<structure name="DocumentGuid" usage="optional"/>
		<collection field="children" usage="required"/>
	</mapping>
</binding>