<?xml version="1.0"?>
<project name="ebookStylesheets" default="normal_build" basedir="..\">

  <property name="IsCoverageBuild" value="false" />
  <property name="tarFile" value="ebookStylesheets.tar" />
  <property name="dir.dist" value="dist" />
  <property name="dir.standalone" value="standalone"/>

  <!--- - - - - - - - - - - - - - - - -
           Create the master class path that will be used by all targets in the script. 
          - - - - - - - - - - - - - - - - - -->
  <path id="classpath.compile">
    <fileset dir="${dir.librariesPath}">
      <include name="**/*.jar" />
    </fileset>

	</path>

  <target name="normal_build" description="Normal build for the ebookStylesheets project"
          depends="-init, -stage_files">
    <echo level="info" message="Normal (aka Non-Coverage) build has completed." />
  </target>

  <!-- =================================
          target: coverage_build
          description: This is the entry target for a "coverage" build. It will compile the
                       main source code, unit tests and integration tests.
         ================================= -->

  <!-- - - - - - - - - - - - - - - - - -
          target: -init
          description: Perform all initialization tasks like cleaning up old compiled code, 
                       create directories that do not exist, etc.
         - - - - - - - - - - - - - - - - - -->
  <target name="-init">
    <echo level="verbose">Deleting old directories, if existing...</echo>
    <delete dir="${dir.standalone}" failonerror="false" includeemptydirs="true" />
    <delete dir="${dir.dist}" failonerror="false" includeemptydirs="true" />

    <echo level="verbose">Creating directories ...</echo>
    <mkdir dir="${dir.standalone}" />
    <mkdir dir="${dir.dist}" />


  </target>

  <!-- =================================
	          target: stage_files
	          description: This will stage files to the dist folder.
	         ================================= -->
  <target name="-stage_files" description="Stage files">
    <antcall target="-copyfiles">
      <param name="param-env" value="dev"/>
    </antcall>

  </target>


  <!-- Target copyfiles to dist folder  -->
  <target name="-copyfiles">

    <copy todir="${dir.dist}">
      <fileset dir ="css"/>
    </copy>

    <copy todir="${dir.dist}">
      <fileset dir ="scss"/>
    </copy>

  </target>


  <!-- - - - - - - - - - - - - - - - - - 
          target: -compress_tar
          description: Compress the files, to be distributed, in a TAR file.
         - - - - - - - - - - - - - - - - - -->
  <target name="tar" description="Compress the deliverable into a tar ball for deployment.">
    <tar longfile="gnu" destfile="${dir.standalone}/${tarFile}">
      <tarfileset filemode="777" dir="${dir.dist}">
      </tarfileset>
    </tar>
  </target>
  
  <target name="-common_tar" description="Compress the deliverable into a tar ball for deployment.">
    <echo message="There are no Common Files"/>
  </target>

</project>