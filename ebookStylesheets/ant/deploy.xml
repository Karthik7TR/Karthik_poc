<?xml version="1.0" encoding="UTF-8"?>

<!--
  Copyright 2013: Thomson Reuters Global Resources. All Rights Reserved.
  Proprietary and Confidential information of TRGR. Disclosure, Use or
  Reproduction without the written authorization of TRGR is prohibited.
-->



<project name="ebookstylesheets" default="fulldeploy" >

<property file="deploy.properties"/>
<property name="numeric_deploy_version" value="" />
  <property name="revision" value="${numeric_deploy_version}" />

  <target name="fulldeploy" description="Normal build for the ebookStylesheets project"
          depends="display,SSHEXEC,SCPexec,SSHEXEC2">
    <echo level="info" message="Normal DEPLOY has completed." />
</target>

<target name ="display">
<echo>Apache Ant version is ${SCMSERVER} - You are at ${SCMPASSWORD} </echo>
  </target>

  <target name="SSHEXEC" > 
  <sshexec host="${SCMSERVER}"
	username="${SCMUSERNAME}"
	password="${SCMPASSWORD}"
	trust="true"
	command="cd /apps/eBookBuilder/cicontent/css; rm -rf X_document**;mv document** X_document**"/>
 </target>

 <target name="SCPexec" > 
   <scp password="${SCMPASSWORD}"
        trust="true"
        sftp="true"
        file="\\cobaltbuilds\cobaltbuild$\Cobalt eBook Builder\${APPLICATION}\${APPLICATION}_${numeric_deploy_version}\${APPLICATION}.tar"
        todir="${SCMUSERNAME}@${SCMSERVER}:/apps/eBookBuilder/cicontent/css"/>
    </target>
	
<target name="SSHEXEC2" > 
  <sshexec host="${SCMSERVER}"
	username="${SCMUSERNAME}"
	password="${SCMPASSWORD}"
	trust="true"
	command="cd /apps/eBookBuilder/cicontent/css;chmod -R 755 ebookStylesheets.tar;tar -xvf ebookStylesheets.tar;find . -type f ! -name 'document.css' -delete;mv document.css document_${numeric_deploy_version}.css"/>
 </target>
 		
</project>