---
Pipeline:
  AssetId: '206296'
  ResourceOwner: firstname.lastname@tr.com  # FIXME  Your email
  EnvironmentType: DEVELOPMENT
  ServiceName: ems
  GroupName: "TEN-Acct-Id"  # FIXME the same GroupName as in the installer-input.yaml
  ArtifactBucket: a206296-TEN-Acct-Id-bucket
  Notifications:
    # Mandatory: The SNS Arn to publish to for certain events in the pipeline.
    SnsArn: arn:aws:sns:eu-west-1:462066144630:a206296-TEN-Acct-Id-bluegreen-resource-cleanup-topic
    # Optional. The events to notify on. Defaults to PipelineSuccess and PipelineFailure.
    NotifyOn:
      PipelineSuccess: true
      PipelineFailure: true
      DeploySuccess: true
      DeployFailure: true

Components:
  Source:
    Type: S3
    Key: TEN-Acct-Id/pipeline-source.zip  # FIXME Where you want to upload your source file zip to.  This is where the pipeline watches to trigger.
    Bucket: a206296-tr-tax-prof-cicd-sandbox-eu-west-1-dojo
  Build:
    Type: BasicCodeBuild
    BuildSpecLocation: cicd/buildspec.yaml
  Bake:
    Type: BasicCodeBuild
    BuildSpecLocation: cicd/bakespec.yaml
    EnvironmentVariables:
      ARTIFACTORY_USERNAME: s.cumulus.read.only
      ARTIFACTORY_PASSWORD:
        Value: arn:aws:secretsmanager:eu-west-1:462066144630:secret:a206296-artifactory-s-cumulus-read-only
        Type: SECRETS_MANAGER

  Deploy:
    - Environment: dev
      DeployspecLocation: cicd/cumulus-deployspec.yaml

    - Environment: qa
      DeployspecLocation: cicd/cumulus-deployspec.yaml
      Approval:
        Enabled: true
        CustomData: QA deploy is queued up for deployment.
        SnsArn: arn:aws:sns:eu-west-1:462066144630:a206296-TEN-Acct-Id-bluegreen-resource-cleanup-topic
